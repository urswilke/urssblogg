---
title: 'Synthesizing Temperature Measurements into Sound '
author: Urs Wilke
date: '2020-11-19'
slug: []
categories: []
tags:
  - midi
  - rstats
  - reticulate
  - ggplot
  - python
  - arduino
  - fluidsynth
subtitle: ''
summary: ''
authors: []
lastmod: '2020-11-19T14:31:07+01:00'
featured: no
image:
  caption: ''
  focal_point: ''
  preview_only: no
projects: []
---

## Introduction 

Interested in arduino, midi audio or sound synthesis? This blog post
might interest you. 

It will give an overview over the [Chaos
Machine](https://gitlab.com/urswilke/chaos_machine_code) code repository. This
repository is the result of the artist and my friend Axel Crettenand having the
idea of his project called CHOEUR AQUATIQUE (the *Underwater Choir*) and hiring
me to develop the code.
  
As we live in different cities and traveling is difficult we decided it's best to make a public repository with the instructions for Axel to reconstruct the machine himself. This article is to briefly introduce you to the project.

To get an idea how the machine sounds so far please have a listen to the generated mp3 file in this [folder](https://gitlab.com/urswilke/chaos_machine_code/-/tree/master/python/recorded_data). This file is the synthesization of the midi file in this folder 


## Technical description

Basically, the machine translates temperature measurements into sound in real time. It consists of a micro-controller that receives the measured temperatures of multiple thermometers and then sends these to the computer with arduino code (see [here](https://gitlab.com/urswilke/chaos_machine_code/-/blob/master/arduino/send_temp/send_temp.ino)). On the PC a python program (see [here](https://gitlab.com/urswilke/chaos_machine_code/-/blob/master/python/temperatures_to_midi.ipynb)) runs that reads the sent temperature data. Then it translates the temperature differences into midi notes of a chosen scale. The midi nodes are sent to fluidsynth which finally synthesizes the midi notes to sound.  


### Chaos Machine

* hover (mouse-over) to see description
* click on clickable nodes (not all) to view source code file

```{r, echo=FALSE}
graphviz_code <- readr::read_file("https://gist.githubusercontent.com/urswilke/d49ccbf043bf2452f5bb9197e014d196/raw/6e60ffd6db1f755c990ce914a1afd8763988b644/graph_main.gv")
widgetframe::frameWidget(DiagrammeR::grViz(graphviz_code))
```

### Complete repository

The execution of the code produces output files. These are then processed for visualization of the notes and audio file output. Furthermore, there are some auxiliary functions. The following diagram depicts how these programs interact with each other.  


```{r, echo=FALSE}
graphviz_code <- readr::read_file("https://gist.githubusercontent.com/urswilke/9176fb739147c835f5d99aa01da7ee96/raw/f7fe3e9ba94dacdc74244f13dde61a8f96a8c90a/graph_complete.gv")
widgetframe::frameWidget(DiagrammeR::grViz(graphviz_code))
```



The main interfaces are the serial connection between python and the arduino on the one hand. On the other hand, the midi format can either be synthesized directly with a midi port or by rendering the midi to audio files. This is done by fluidsynth using an sf2 soundfont that stores audio information for midi notes.


### Live plotter


<video width="289" height="198" controls>
  <source src="vid.mp4" type="video/mp4">
</video>

