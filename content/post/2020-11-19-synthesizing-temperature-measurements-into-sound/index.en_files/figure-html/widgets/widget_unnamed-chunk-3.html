<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<style>body{background-color:white;}</style>
<script src="grViz_libs/htmlwidgets/htmlwidgets.js"></script>
<script src="grViz_libs/viz/viz.js"></script>
<link href="grViz_libs/DiagrammeR-styles/styles.css" rel="stylesheet" />
<script src="grViz_libs/grViz-binding/grViz.js"></script>
<script src="grViz_libs/pymjs/pym.v1.min.js"></script>
  <title>grViz</title>
</head>
<body>
<div id="htmlwidget_container">
  <div id="htmlwidget-a2cee85222fd75df6aa4" style="width:100%;height:500px;" class="grViz html-widget"></div>
  <script>HTMLWidgets.pymChild = new pym.Child();HTMLWidgets.addPostRenderHandler(function(){
                                setTimeout(function(){HTMLWidgets.pymChild.sendHeight();},100);
                            });</script>
</div>
<script type="application/json" data-for="htmlwidget-a2cee85222fd75df6aa4">{"x":{"diagram":"#  do not edit by hand. This file is auto generated by when knitting work_flow.Rmd.\ndigraph workflow {\n  ranksep=.5;\n  graph [\n    truecolor=true,\n    # the last 2 \"00\" make it completely transparent here, \n    # thus all that comes before - I don\"t care\n    bgcolor=\"#ffffff00\",\n    fontname = \"helvetica\",\n    #splines=ortho,\n    concentrate=true\n  ];\n  node [\n    fontname = \"helvetica\", \n    style = \"rounded,filled,radial\", \n    gradientangle=60, \n    fillcolor=\"#dddddd99:#7777772f\", \n    # gradients dont work on observable...:\n    # fillcolor=\"#dddddd99\", \n    fontsize=25,\n    penwidth=4, \n    color = \"#ffffff55\",\n    \n  ];\n  edge [\n    fontname = \"helvetica\", \n    penwidth=5, \n    color=\"#aaaaaabb\"\n  ];\n  penwidth=5;\n  style=rounded\n\n  subgraph cluster_arduino {\n    label = < <B>arduino<\/B> >;\n    bgcolor = \"#a8feff\";\n    color = \"#3e979d\";\n    fontcolor = \"#3e979d\";\n    fontsize = 30;\n    Thermometers -> mc;\n    sketch -> mc;\n    Thermometers [shape=box];\n    sketch [\n      label = \"send_temp.ino\", \n      shape=box, \n      URL=\"https://gitlab.com/urswilke/chaos_machine_code/-/tree/master/arduino/send_temp/send_temp.ino\", \n      tooltip = \"arduino sketch to read multiple DS18B20 thermometers and then print the information to the serial connection\"\n    ];\n    {rank=same; mc; sketch}\n  }\n  sc -> python [\n    weight = 100, \n    tooltip = \"setup serial connection in arduino\",\n    URL = \"https://gitlab.com/urswilke/chaos_machine_code/-/tree/master/python/T_to_midi.ipynb#Arduino\"\n  ]\n\n  subgraph cluster_main {\n    label = < <B>python<\/B> >;\n    bgcolor = \"#fffb4b\";\n    color = \"#4f93ba\";\n    fontcolor = \"#4f93ba\";\n    fontsize = 30;\n    penwidth=5;\n    #graph[style=dotted];\n    \"functions.py\" [\n      shape=box, \n      tooltip = \"functions that are imported in the T_to_midi notebook\",\n      URL = \"https://gitlab.com/urswilke/chaos_machine_code/-/tree/master/python/functions.py\"\n    ]\n    python [\n      shape=box, \n      tooltip = \"python real-time loop to\n* read serial string, extract temperatures\n* calculate temperature differences\n* translate differences to midi notes according to a specified musical scale\n* send the note events to a midi port in real time \nDuring the loop the data is recorded in lists and when it has finished the data is written to a midi and csv files. \", \n      label = \"T_to_midi.ipynb\",\n      URL = \"https://gitlab.com/urswilke/chaos_machine_code/-/tree/master/python/T_to_midi.ipynb\"\n    ];\n    \"functions.py\" -> python\n    mc [\n      shape=box, \n      label=\"micro-controller\",\n      tooltip=\"the micro-controller is connected to the PC via USB\",\n    ];\n    {rank = same; \"functions.py\" python}\n  }\n  \n#  subgraph cluster_main_to_R_connectors {\n#    label = \"main workflow\";\n\n\n#  }\n  subgraph cluster_fluidsynth {\n    label = <<B>fluidsynth  <\/B>>;\n    fontsize = 30;\n    bgcolor = \"#ffd030\";\n    color = \"#f07531\";\n    fontcolor = \"#f07531\";\n    penwidth=5;\n    sf2 [shape = cylinder, label = \"sound\\nfont\"];\n    fluidsynth [\n      shape=box,\n      tooltip = \"* Fluidsynth can be easily started via the GUI QSynth.\\n* An sf2 soundfont file has to be used.\\n* A midi port can be synthesized in real time, or\\n* A midi file can be rendered to an audio file.\"\n    ];\n    sf2 -> fluidsynth;\n    {rank=same; fluidsynth sf2}\n  }\n  subgraph cluster_output_files {\n  label = < <B>output files<\/B> >;\n  fontsize = 30;\n  bgcolor = \"#ffd080\" \n  color = \"#b25605\" \n  fontcolor = \"#b25605\" \n  midifile [\n    shape = cylinder,\n    label = \"live_record.mid\",\n    tooltip = \"midi file written by T_to_midi.ipynb\",\n    URL = \"https://gitlab.com/urswilke/chaos_machine_code/-/tree/master/python/recorded_data/\"\n  ];\n  prelim_mp3 [\n    label = \"test.mp3\"\n    shape = cylinder;\n    tooltip = \"resulting mp3 file, when the midifile test.mid is rendered by fluidsynth with the specified soundfont\",\n    URL = \"https://gitlab.com/urswilke/chaos_machine_code/-/tree/master/R/preliminary_study/\"\n  ];\n  mp3 [\n    label = \"live_record.mp3\"\n    shape = cylinder;\n    tooltip = \"resulting mp3 file, when the midifile live_record.mid (written by T_to_midi.ipynb) is rendered by fluidsynth with the specified soundfont\"\n    URL = \"https://gitlab.com/urswilke/chaos_machine_code/-/tree/master/python/recorded_data/\"\n  ];\n  csv [shape = cylinder];\n  prelim_audio [\n    shape=cylinder, \n    label=\"test.mid\",\n    tooltip = \"midi file written by preliminary_study.Rmd\",\n    URL = \"https://gitlab.com/urswilke/chaos_machine_code/-/tree/master/R/preliminary_study/\"\n  ]\n  prelim_audio -> prelim_mp3\n  midifile -> mp3\n\n\n  {rank=same;prelim_audio, midifile}\n}\npython -> csv [color = \"#4f93ba\"];\npython -> midifile [color = \"#4f93ba\"];\nfluidsynth -> mp3 [style = dashed, color = \"#f07531\"]\nfluidsynth -> prelim_mp3 [style = dashed, color = \"#f07531\"]\n\n  \n  mp -> fluidsynth [ weight = 100]\n  mc -> sc [\n    arrowhead=none, \n    tooltip = \"setup serial connection in arduino\",\n    URL = \"https://gitlab.com/urswilke/chaos_machine_code/-/tree/master/arduino/send_temp/send_temp.ino#L24\"\n  ];\n  python -> mp [arrowhead=none, weight = 1000];\n  sc [\n    label=\"serial\\nconnection\", \n    color=grey, \n    shape=diamond,\n    tooltip = \"The serial string sent from the arduino is of the following format:\nID: 40255662332332138251, T: 24.62; ID: 402552102282332138209, T: 24.12; ID: 402551932392332138119, T: 24.62; ID: 4025514153413227192, T: 24.62; ID: 402552272422332138169, T: 21.75\",\n    URL = \"https://gitlab.com/urswilke/chaos_machine_code/-/tree/master/python/recorded_data/serial_string.txt\"\n  ];\n  mp [\n    label = \"midi\\nport\", \n    shape=diamond, \n    color=grey,\n    tooltip = \"The midi port to fluidsynth is set up by the python code in T_to_midi.ipynb\",\n    URL = \"https://gitlab.com/urswilke/chaos_machine_code/-/tree/master/python/T_to_midi.ipynb#Setup_fluidsynth_connection\"\n  ];\n  #mc -> sc -> python -> mp -> fluidsynth[ style = invis, weight= 10 ];\n  fluidsynth -> speakers\n  \n  subgraph cluster_speaker {\n    label = < <B>speaker<\/B> >;\n    fontsize = 30;\n    bgcolor=\"#FFD700:#CCA600\";\n    # gradients dont work on observable...:\n    # bgcolor=\"#CCA600\";\n    speakers [label=\"ðŸ”ŠðŸŽ¶\"];\n  }\n  \n\n  subgraph cluster_R {\n  # https://stackoverflow.com/questions/6824431/placing-clusters-on-the-same-rank-in-graphviz\n  label = < <B>R<\/B> >;\n  fontsize = 30;\n  bgcolor = \"#87d5ff\"\n  color = \"#217ca3\"\n  fontcolor = \"#217ca3\"\n  newrank=true;\n  csv -> \"plot_csv_data.R\";\n  \"plot_midifile.Rmd\" [\n    shape=box, \n    URL = \"https://gitlab.com/urswilke/chaos_machine_code/-/tree/master/R/plot_midifile/plot_midifile.md\"\n    tooltip = \"In this document, a piano roll visualization is produced of the midifile written at the end of the python notebook. And I will promote the two packages I wrote:\n* The python package [miditapyr](https://github.com/urswilke/miditapyr/) can tabulate midifile data (read in by [mido](github.com/mido/mido)) in dataframes.\n* The R package [pyramidi](https://github.com/urswilke/pyramidi/) can transform these dataframes to a wide format that allows for an easy way to plot piano roll plots.\"\n  ]\n  \"plot_csv_data.R\" [\n    shape=box, \n    tooltip = \"plot the data in the csv files written in python/T_to_midi.ipynb\"\n    URL = \"https://gitlab.com/urswilke/chaos_machine_code/-/tree/master/R/plot_csv_data/plot_csv_data.md\"\n  ]\n  plotter [\n    label = \"live_plotter.R\",\n    shape=box, \n    tooltip = \"script to plot the serial data in real time\",\n    URL = \"https://gitlab.com/urswilke/chaos_machine_code/-/tree/master/R/live_plotter/live_plotter.R\"\n  ]\n  #&#8226; after the real-time loop, csv, midi and mp3 files are generated<br ALIGN = \"LEFT\"/>\n  prelim [\n    shape=box, \n    label=\"preliminary_study.Rmd\", \n    URL=\"https://gitlab.com/urswilke/chaos_machine_code/-/tree/master/R/preliminary_study/preliminary_study.md\"\n    tooltip=\"This is a preliminary study to translate temperature measurements into sound. \n* Fake temperaure curves are generated\n* pairwise differences are calculated\n* these differnces are mapped to midi notes \n* this information is saved to a midi file\n* which is synthesized to an audiofile\"\n  ];\n  #  {rank=same; midifile [group = g3] csv [group = g3] }\n  edge[style=invis];\n  python -> plotter;\n  plotter -> prelim;\n  prelim -> \"plot_midifile.Rmd\";\n  \"plot_midifile.Rmd\" -> \"plot_csv_data.R\";\n  \"plot_midifile.Rmd\" -> \"plot_csv_data.R\";\n}\n\n{rank=same; python plotter}\n#{rank=same; prelim prelim_audio}\nsc -> plotter;\nmidifile -> \"plot_midifile.Rmd\"\n  \nprelim -> prelim_audio\nedge[style=invis];\nmidifile -> csv;\n\n\n  \n  # mc -> sc [ weight = 100, style=invis]\n  # python -> mp [ weight = 100, style=invis]\n  # mp -> fluidsynth [ weight = 100, style=invis]\n}","config":{"engine":"dot","options":null}},"evals":[],"jsHooks":[]}</script>
<script type="application/htmlwidget-sizing" data-for="htmlwidget-a2cee85222fd75df6aa4">{"viewer":{"width":"100%","height":350,"padding":0,"fill":false},"browser":{"width":"100%","height":500,"padding":0,"fill":false}}</script>
</body>
</html>
